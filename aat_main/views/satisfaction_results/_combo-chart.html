<script type="text/javascript">
    google.charts.load('current', {'packages': ['corechart']});
    google.charts.setOnLoadCallback(drawVisualization);

    function drawVisualization() {
        let data = []
        let titleRow = ['Statement']
        {% for response in responses.values() %}
            titleRow.push('{{ response }}')
        {% endfor %}
        data.push(titleRow)

        let newRow
        {% for statement in results %}
            newRow = []
            {% if statement['statement'] == 'I find it easy to navigate the AAT to find my tasks that need to be completed' %}
                newRow.push('Easy to navigate')
            {% elif statement['statement'] == 'I am pleased overall with the functionality of the AAT' %}
                newRow.push('Easy to navigate')
            {% endif %}
            {% for count in statement['responses'].values() %}
                newRow.push({{ count }})
            {% endfor %}
            data.push(newRow)
        {% endfor %}

        data = google.visualization.arrayToDataTable(data)

        const options = {
            title: 'Number of responses to each satisfaction statement',
            vAxis: {title: 'Responses'},
            hAxis: {title: 'Statement'},
            seriesType: 'bars',
            series: {5: {type: 'line'}}
        };

        const chart = new google.visualization.ComboChart(document.getElementById('combo-chart'));
        chart.draw(data, options);
    }
</script>
